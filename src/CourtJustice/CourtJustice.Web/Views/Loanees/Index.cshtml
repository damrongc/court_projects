@using CourtJustice.Domain.ViewModels;
@model Tuple<LoaneeViewModel, IEnumerable<AssetLandViewModel>>
@{
    ViewData["Title"] = "ข้อมูลลูกหนี้";
}

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-between mb-3">
                    <h3 class="mb-3">@ViewData["Title"]</h3>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="d-flex flex-wrap justify-content-between">
                            <div class="form-inline">
                                <div class="form-group">
                                    <label class="control-label">ผู้ว่าจ้าง</label>
                                    <select id="ddlEmployer" class="form-control" asp-items="ViewBag.Employers"></select>
                                </div>
                                <div class="form-group ml-4">
                                    <label class="control-label">กลุ่มงาน</label>
                                    <select id="ddlLoanTaskStatus" class="form-control" asp-items="ViewBag.LoanTaskStatus"></select>
                                </div>
                                <div class="form-group ml-4">
                                    <a onclick="getLoanee();" class="btn btn-primary btn-sm text-white"><i class="fa fa-refresh"></i> Show Data</a>
                                </div>
                            
                            </div>
                            <div class="form-inline">
                                <a asp-action="IndexImport" class="btn btn-info btn-sm text-white ml-2"><i class="fa fa-file-excel-o"></i> Import</a>
                                <a asp-action="Create" class="btn btn-success btn-sm text-white ml-2"><i class="fa fa-plus"></i> Create New</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <div id="view-table">
                    @await Html.PartialAsync("_ViewTable", Model.Item1)
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                @*        <h4 class="card-title">@Model?.Name</h4>
                    <p class="card-description">@Model?.CusId</p>*@
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="loanee-tab" data-toggle="tab" href="#loanee-1" role="tab" aria-controls="loanee-1" aria-selected="true">รายละเอียดลูกหนี้</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="asset-land-tab" data-toggle="tab" role="tab" href="#asset-land-1" aria-controls="asset-land-1" aria-selected="false" onclick="showAssetLandTab('@Url.Action("GetByCusId","AssetLands")');">หลักทรัพย์(ที่ดิน)</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="asset-car-tab" data-toggle="tab" role="tab" href="#asset-car-1" aria-controls="asset-car-1" aria-selected="false" onclick="showAssetCarTab('@Url.Action("GetByCusId","AssetCars")');">หลักทรัพย์(รถ)</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="asset-salary-tab" data-toggle="tab" role="tab" href="#salary-car-1" aria-controls="salary-car-1" aria-selected="false" onclick="showSalaryTab('@Url.Action("GetByCusId","AssetSalaries")');">หลักทรัพย์(เงืนเดือน)</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="payment-tab" data-toggle="tab" role="tab" href="#payment-1" aria-controls="payment-1" aria-selected="false" onclick="showPaymentTab('@Url.Action("GetByCusId","Payments")')">การชำระ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="guarantor-tab" data-toggle="tab" role="tab" href="#guarantor-1" aria-controls="guarantor-1" aria-selected="false" onclick="showGuratorTab('@Url.Action("GetByCusId","Gurators")')">ผู้ค้ำประกัน</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="referencer-tab" data-toggle="tab" role="tab" href="#referencer-1" aria-controls="referencer-1" aria-selected="false" onclick="showReferencerTab('@Url.Action("GetByCusId","Referencers")')">บุคคลอ้างอิง</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="remark-tab" data-toggle="tab" role="tab" href="#remark-1" aria-controls="remark-1" aria-selected="false" onclick="showReferencerTab('@Url.Action("GetByCusId","LoaneeRemarks")')">หมายเหตุ</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="loanee-1" role="tabpanel" aria-labelledby="loanee-tab">
                        <div id="view-loanee">
                        </div>
                    </div>
                    <div class="tab-pane fade" id="asset-land-1" role="tabpanel" aria-labelledby="asset-land-tab">
                        <div id="view-asset-land">
                        </div>
                    </div>
                    <div class="tab-pane fade" id="asset-car-1" role="tabpanel" aria-labelledby="asset-car-tab">
                        <div id="view-asset-car">
                        </div>
                    </div>
                    <div class="tab-pane fade" id="asset-salary-1" role="tabpanel" aria-labelledby="asset-salary-tab">
                        <div id="view-asset-salary">
                        </div>
                    </div>
                    <div class="tab-pane fade" id="payment-1" role="tabpanel" aria-labelledby="payment-tab">
                        <div id="view-payment">
                        </div>
                    </div>
                    <div class="tab-pane fade" id="guarantor-1" role="tabpanel" aria-labelledby="guarantor-tab">
                        <div id="view-guarantor">
                        </div>
                    </div>
                    <div class="tab-pane fade" id="referencer-1" role="tabpanel" aria-labelledby="referencer-tab">
                        <div id="view-referencer">
                        </div>
                    </div>
                    <div class="tab-pane fade" id="remark-1" role="tabpanel" aria-labelledby="remark-tab">
                        <div id="view-remark">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


@Html.Hidden("txtCusId")
@Html.Hidden("hdDeleteRoute", Url.Action("Delete", "Loanees"))
@Html.Hidden("hdGetWithPaging", Url.Action("GetWithPaging", "Loanees"))

@Html.Hidden("hdGetLoaneeByKey", Url.Action("GetLoaneeByKey", "Loanees"))

@section scripts{
    <script src="~/js/pages/address_lookup.js" asp-append-version="true"></script>
    <script src="~/js/pages/loanee.js" asp-append-version="true"></script>
    <script src="~/js/pages/asset_land.js" asp-append-version="true"></script>
    <script src="~/js/pages/payment.js" asp-append-version="true"></script>
    <script src="~/js/pages/asset_car.js" asp-append-version="true"></script>
}
